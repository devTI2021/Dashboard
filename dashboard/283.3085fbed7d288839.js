(self.webpackChunkDashboard=self.webpackChunkDashboard||[]).push([[283],{2283:(L,S,w)=>{"use strict";w.r(S),w.d(S,{HomeModule:()=>De});var Z=w(9808),D=w(2638),a=w(1083),r=w(3075),u=w(520),p=w(4999),m=w(8401),h=w(4488),e=w(5e3),d=w(8966),y=w(1271),t=w(4593),n=w(9224),o=w(7322),i=w(4107),_=w(508),f=w(7423),l=w(5245),T=w(7531),b=w(7446),x=w(6856);function k(s,v){if(1&s&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.Q6J("value",c.value),e.xp6(1),e.hij(" ",c.viewValue," ")}}function N(s,v){if(1&s){const c=e.EpF();e.TgZ(0,"form",4),e.NdJ("ngSubmit",function(){return e.CHM(c),e.oxw().openDialog()}),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Motivo de visita"),e.qZA(),e.TgZ(4,"mat-select",6),e.YNc(5,k,2,2,"mat-option",7),e.qZA(),e.qZA(),e.TgZ(6,"button",8),e._uU(7,"Registrar visita"),e.qZA(),e.qZA()}if(2&s){const c=e.oxw();e.Q6J("formGroup",c.visit),e.xp6(5),e.Q6J("ngForOf",c.motive)}}function E(s,v){if(1&s){const c=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(c),e.oxw().Download()}),e._uU(1,"Descargar visitas"),e.qZA()}}function F(s,v){if(1&s){const c=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(c),e.oxw().NumVisits()}),e._uU(1,"Visualizar visitas"),e.qZA()}}function C(s,v){1&s&&(e.TgZ(0,"th",25),e._uU(1,"Cliente"),e.qZA())}function U(s,v){if(1&s&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.customer," ")}}function q(s,v){1&s&&(e.TgZ(0,"th",25),e._uU(1,"Asesor comercial"),e.qZA())}function V(s,v){if(1&s&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.seller," ")}}function M(s,v){1&s&&(e.TgZ(0,"th",25),e._uU(1,"Fecha"),e.qZA())}function O(s,v){if(1&s&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.date," ")}}function B(s,v){1&s&&(e.TgZ(0,"th",25),e._uU(1,"Nit cliente"),e.qZA())}function Q(s,v){if(1&s&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.nit," ")}}function G(s,v){1&s&&(e.TgZ(0,"th",25),e._uU(1,"Accion"),e.qZA())}function J(s,v){if(1&s){const c=e.EpF();e.TgZ(0,"td",26),e.TgZ(1,"button",27),e.NdJ("click",function(){const I=e.CHM(c).$implicit;return e.oxw(2).refreshTurns(I.id_turno,I.nit)}),e._uU(2,"Solicitar turno"),e.qZA(),e.qZA()}}function $(s,v){1&s&&e._UZ(0,"tr",28)}function j(s,v){1&s&&e._UZ(0,"tr",29)}function X(s,v){if(1&s){const c=e.EpF();e.ynx(0),e.TgZ(1,"div",12),e.TgZ(2,"button",13),e.NdJ("click",function(){return e.CHM(c),e.oxw().Download()}),e.TgZ(3,"mat-icon"),e._uU(4,"download"),e.qZA(),e.qZA(),e.TgZ(5,"button",14),e.NdJ("click",function(){return e.CHM(c),e.oxw().GetVist()}),e.TgZ(6,"mat-icon"),e._uU(7,"update"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"table",15),e.ynx(9,16),e.YNc(10,C,2,0,"th",17),e.YNc(11,U,2,1,"td",18),e.BQk(),e.ynx(12,19),e.YNc(13,q,2,0,"th",17),e.YNc(14,V,2,1,"td",18),e.BQk(),e.ynx(15,20),e.YNc(16,M,2,0,"th",17),e.YNc(17,O,2,1,"td",18),e.BQk(),e.ynx(18,21),e.YNc(19,B,2,0,"th",17),e.YNc(20,Q,2,1,"td",18),e.BQk(),e.ynx(21,22),e.YNc(22,G,2,0,"th",17),e.YNc(23,J,3,0,"td",18),e.BQk(),e.YNc(24,$,1,0,"tr",23),e.YNc(25,j,1,0,"tr",24),e.qZA(),e.BQk()}if(2&s){const c=e.oxw();e.xp6(8),e.Q6J("dataSource",c.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",c.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",c.displayedColumns)}}function W(s,v){if(1&s&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.Q6J("value",c.vh_familia),e.xp6(1),e.hij(" ",c.descripcion," ")}}function K(s,v){if(1&s&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.Q6J("value",c.value),e.xp6(1),e.hij(" ",c.viewValue," ")}}const P="mat-card[_ngcontent-%COMP%]{margin:2%}mat-form-field[_ngcontent-%COMP%]{display:block;width:20%}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .example-button-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:8px}table[_ngcontent-%COMP%]{margin-top:3%;width:100%}.form-field[_ngcontent-%COMP%]{display:inline}.example-section[_ngcontent-%COMP%]{margin-top:1%}.div-action[_ngcontent-%COMP%]{float:right}.btn-download[_ngcontent-%COMP%]{margin-top:1%}.btn-download-left[_ngcontent-%COMP%]{margin-left:1%}";function z(s,v){1&s&&(e.TgZ(0,"th",18),e._uU(1," Mes "),e.qZA())}function ee(s,v){if(1&s&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.month," ")}}function te(s,v){1&s&&(e.TgZ(0,"th",18),e._uU(1,"Dia "),e.qZA())}function ne(s,v){if(1&s&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.day," ")}}function oe(s,v){1&s&&(e.TgZ(0,"th",18),e._uU(1," Cantidad "),e.qZA())}function ae(s,v){if(1&s&&(e.TgZ(0,"td",19),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.count," ")}}function re(s,v){1&s&&e._UZ(0,"tr",20)}function ie(s,v){1&s&&e._UZ(0,"tr",21)}function se(s,v){if(1&s&&(e.ynx(0),e.TgZ(1,"table",10),e.ynx(2,11),e.YNc(3,z,2,0,"th",12),e.YNc(4,ee,2,1,"td",13),e.BQk(),e.ynx(5,14),e.YNc(6,te,2,0,"th",12),e.YNc(7,ne,2,1,"td",13),e.BQk(),e.ynx(8,15),e.YNc(9,oe,2,0,"th",12),e.YNc(10,ae,2,1,"td",13),e.BQk(),e.YNc(11,re,1,0,"tr",16),e.YNc(12,ie,1,0,"tr",17),e.qZA(),e.BQk()),2&s){const c=e.oxw();e.xp6(1),e.Q6J("dataSource",c.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",c.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",c.displayedColumns)}}let H=(()=>{class s{constructor(c,g,A,I){this.dialog=c,this.httpClient=g,this._snackBar=A,this.session=I,this.motive=[{value:1,viewValue:"Vitrina nuevos"},{value:3,viewValue:"Cliente antiguos"},{value:4,viewValue:"Negocios"},{value:5,viewValue:"Entregas"},{value:6,viewValue:"Usados"},{value:7,viewValue:"Chevyplan"},{value:8,viewValue:"Repuestos"},{value:9,viewValue:"Taller"},{value:10,viewValue:"Servicio al cliente"},{value:11,viewValue:"Administracion"},{value:25,viewValue:"Cita digital"},{value:26,viewValue:"Taxis"}],this.visit=new r.cw({motive:new r.NI("",r.kI.required)}),this.displayedColumns=["Customer","Adviser","Fecha","Nit cliente","Accion"],this.dataTable=[],this.dataSource=new p.by(this.dataTable),this.hideForm=this.session.getPermission("COMERCIAL",h.d.PERMISSION_COMERCIAL.Regis_visitas.index),this.hideVisit=this.session.getPermission("COMERCIAL",h.d.PERMISSION_COMERCIAL.Download_date.index),console.log(this.hideForm)}ngOnInit(){this.GetVist()}Download(){this.dialog.open(ue,{width:"900px"}).afterClosed().subscribe(g=>{this.httpClient.post(`${h.d.API_ENDPOINT}/api/Visit`,{datein:(0,Z.p6)(g.datein,"yyyy-MM-dd","en"),dateout:(0,Z.p6)(g.dateout,"yyyy-MM-dd","en")}).subscribe(A=>{console.log(A),new m.nk(A,"My Report",{headers:["Fecha","Hora","Usuario","Nit","Nombres","Celular","Mail","Tipo_vehiculo","Asesor","Plan_venta","Retoma","Financiado","Observaciones"]})})})}NumVisits(){this.dialog.open(ce,{width:"900px"})}GetVist(){let c=["CIALVEH"].find(g=>g==this.session.getGroup());c=null!=c?this.session.getUsername():void 0,this.httpClient.post(`${h.d.API_ENDPOINT}/api/getvisit`,{user:c}).subscribe(g=>{this.dataTable=g,this.dataSource=new p.by(this.dataTable),console.log(g)})}refreshTurns(c,g){this.Popturns().subscribe(A=>{A?this.httpClient.post(`${h.d.API_ENDPOINT}/api/changeTurns`,{idTurn:A.id_turno,idTurnOld:c,nit:g}).subscribe(I=>{console.log(I)}):this._snackBar.open("No hay asesores disponibles","OK",{duration:1e3})})}Popturns(){return this.httpClient.get(`${h.d.API_ENDPOINT}/api/getTurn`)}openDialog(){this.visit.valid&&this.dialog.open(le,{width:"900px"}).afterClosed().subscribe(g=>{console.log(g),this.Popturns().subscribe(A=>{A?this.httpClient.post(`${h.d.API_ENDPOINT}/api/assingTurn`,{form:g,motive:this.visit.controls.motive.value,seller:A.usuario_as,nit_seller:A.nit_asesor,idTurn:A.id_turno,user:this.session.getUsername()}).subscribe(I=>{console.log(I),console.log("termino"),this.GetVist()}):this._snackBar.open("No hay asesores disponibles","OK",{duration:1e3})})})}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(d.uw),e.Y36(u.eN),e.Y36(y.ux),e.Y36(t.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-turns"]],viewQuery:function(c,g){if(1&c&&e.Gf(p.BZ,7),2&c){let A;e.iGM(A=e.CRH())&&(g.table=A.first)}},decls:10,vars:4,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["mat-stroked-button","","class","btn-download",3,"click",4,"ngIf"],["mat-stroked-button","","class","btn-download-left",3,"click",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","motive"],[3,"value",4,"ngFor","ngForOf"],["mat-stroked-button","","type","submit"],[3,"value"],["mat-stroked-button","",1,"btn-download",3,"click"],["mat-stroked-button","",1,"btn-download-left",3,"click"],[1,"div-action","example-button-row"],["mat-icon-button","","aria-label","Descargar informacion en csv",3,"click"],["mat-icon-button","","aria-label","Actualizar informacion",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Customer"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Adviser"],["matColumnDef","Fecha"],["matColumnDef","Nit cliente"],["matColumnDef","Accion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(c,g){1&c&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-title"),e._uU(2,"Registro de visitas"),e.qZA(),e.TgZ(3,"mat-card-subtitle"),e._uU(4,"En esta seccion se registrara la visita de clientes"),e.qZA(),e.TgZ(5,"mat-card-content"),e.YNc(6,N,8,2,"form",0),e.YNc(7,E,2,0,"button",1),e.YNc(8,F,2,0,"button",2),e.YNc(9,X,26,3,"ng-container",3),e.qZA(),e.qZA()),2&c&&(e.xp6(6),e.Q6J("ngIf",1==g.hideForm),e.xp6(1),e.Q6J("ngIf",g.hideVisit),e.xp6(1),e.Q6J("ngIf",g.hideVisit),e.xp6(1),e.Q6J("ngIf",g.dataSource.data.length>0))},directives:[n.a8,n.n5,n.$j,n.dn,Z.O5,r._Y,r.JL,r.sg,o.KE,o.hX,i.gD,r.JJ,r.u,Z.sg,_.ey,f.lW,l.Hw,p.BZ,p.w1,p.fO,p.ge,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk],styles:[P]}),s})(),le=(()=>{class s{constructor(c,g,A,I){this.httpClient=c,this.session=g,this.dialogRef=A,this._snackBar=I,this.Form=new r.cw({type_id:new r.NI({value:"",disabled:!0},r.kI.required),id:new r.NI("",r.kI.compose([r.kI.required,r.kI.pattern("[0-9]+")])),firstName:new r.NI({value:"",disabled:!0},r.kI.compose([r.kI.required,r.kI.pattern("[a-zA-Z ]*")])),lastName:new r.NI({value:"",disabled:!0},r.kI.compose([r.kI.required,r.kI.pattern("[a-zA-Z ]*")])),cellphone:new r.NI({value:"",disabled:!0},r.kI.compose([r.kI.required,r.kI.pattern("[0-9]+")])),email:new r.NI({value:"",disabled:!0},r.kI.compose([r.kI.required,r.kI.email])),obs:new r.NI("",r.kI.required),vh:new r.NI("",r.kI.required),use_vh:new r.NI("",r.kI.required),type_vh:new r.NI("",r.kI.required),plan_vh:new r.NI("",r.kI.required),retoma:new r.NI(!1),financed:new r.NI(!1)}),this.vehicles=[],this.emailRegx=/^(([^<>+()\[\]\\.,;:\s@"-#$%&=]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/,this.foods=[{value:0,viewValue:"Primer vehiculo"},{value:1,viewValue:"Vehiculo familiar"},{value:2,viewValue:"Vehiculo trabajo"},{value:3,viewValue:"Renovacion vehiculo"},{value:4,viewValue:"Vehiculo usado"}],this.existUser=!1}ngOnInit(){this.GetVh_interes()}GetVh_interes(){let c=(new u.WM).set("auth-token",this.session.getCurrentUser().token);this.httpClient.get(`${h.d.API_ENDPOINT}/api/vh_interes`,{headers:c}).subscribe(g=>{this.vehicles=g})}closeDialog(){if(this.Form.valid)if(this.existUser)this.dialogRef.close(this.Form.getRawValue());else{let c=(new u.WM).set("auth-token",this.session.getCurrentUser().token);this.httpClient.post(`${h.d.API_ENDPOINT}/api/findPerson`,{value:this.Form.controls.lastName.value+" "+this.Form.controls.firstName.value,param:1},{headers:c}).subscribe(g=>{g?this._snackBar.open("Ya existe un tercero con el mismo nombre","OK"):this.dialogRef.close(this.Form.getRawValue())})}}FindPerson(){let c=(new u.WM).set("auth-token",this.session.getCurrentUser().token);console.log("entro"),this.httpClient.post(`${h.d.API_ENDPOINT}/api/findPerson`,{value:this.Form.controls.id.value,param:0},{headers:c}).subscribe(g=>{g?(this.existUser=!0,this.Form.patchValue({firstName:g.name,lastName:g.lastname,cellphone:g.cellphone,email:g.mail,type_id:g.typeID})):(this.existUser=!1,this.Form.controls.firstName.enable(),this.Form.controls.lastName.enable(),this.Form.controls.cellphone.enable(),this.Form.controls.email.enable(),this.Form.controls.type_id.enable())})}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(u.eN),e.Y36(t.m),e.Y36(d.so),e.Y36(y.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["dialog-content-example-dialog"]],decls:81,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","outline",1,"form-field"],["matInput","","formControlName","id",3,"change"],["formControlName","type_id"],["value","C"],["value","N"],["value","E"],["value","T"],["value","P"],["value","O"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","cellphone"],["matInput","","formControlName","email"],["formControlName","vh"],[3,"value",4,"ngFor","ngForOf"],["formControlName","use_vh","name","food"],["formControlName","type_vh","name","food"],["value","0"],["value","1"],["formControlName","plan_vh","name","food"],["matInput","","formControlName","obs","placeholder","Comentarios...","maxlength","200"],[1,"example-section"],["formControlName","retoma"],["formControlName","financed"],[1,"div-action"],["mat-button","","mat-dialog-close",""],["mat-button","","type","submit"],[3,"value"]],template:function(c,g){1&c&&(e.TgZ(0,"h2",0),e._uU(1,"Creacion de cliente"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return g.closeDialog()}),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"No. Documento "),e.qZA(),e.TgZ(7,"input",3),e.NdJ("change",function(){return g.FindPerson()}),e.qZA(),e.qZA(),e.TgZ(8,"mat-form-field",2),e.TgZ(9,"mat-label"),e._uU(10,"Tipo de documento"),e.qZA(),e.TgZ(11,"mat-select",4),e.TgZ(12,"mat-option",5),e._uU(13,"Cedula "),e.qZA(),e.TgZ(14,"mat-option",6),e._uU(15,"Nit "),e.qZA(),e.TgZ(16,"mat-option",7),e._uU(17,"Extranjeria "),e.qZA(),e.TgZ(18,"mat-option",8),e._uU(19,"Tarjeta identidad "),e.qZA(),e.TgZ(20,"mat-option",9),e._uU(21,"Pasaporte "),e.qZA(),e.TgZ(22,"mat-option",10),e._uU(23,"Otro "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"mat-form-field",2),e.TgZ(25,"mat-label"),e._uU(26," Nombre "),e.qZA(),e._UZ(27,"input",11),e.qZA(),e.TgZ(28,"mat-form-field",2),e.TgZ(29,"mat-label"),e._uU(30," Apellidos "),e.qZA(),e._UZ(31,"input",12),e.qZA(),e.TgZ(32,"mat-form-field",2),e.TgZ(33,"mat-label"),e._uU(34," Celular "),e.qZA(),e._UZ(35,"input",13),e.qZA(),e.TgZ(36,"mat-form-field",2),e.TgZ(37,"mat-label"),e._uU(38," Correo "),e.qZA(),e._UZ(39,"input",14),e.qZA(),e.TgZ(40,"mat-form-field",2),e.TgZ(41,"mat-label"),e._uU(42,"Vehiculo de interes"),e.qZA(),e.TgZ(43,"mat-select",15),e.YNc(44,W,2,2,"mat-option",16),e.qZA(),e.qZA(),e.TgZ(45,"mat-form-field",2),e.TgZ(46,"mat-label"),e._uU(47," Uso de vehiculo "),e.qZA(),e.TgZ(48,"mat-select",17),e.YNc(49,K,2,2,"mat-option",16),e.qZA(),e.qZA(),e.TgZ(50,"mat-form-field",2),e.TgZ(51,"mat-label"),e._uU(52," Tipo de vehiculo "),e.qZA(),e.TgZ(53,"mat-select",18),e.TgZ(54,"mat-option",19),e._uU(55,"Camioneta"),e.qZA(),e.TgZ(56,"mat-option",20),e._uU(57,"Automovil"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"mat-form-field",2),e.TgZ(59,"mat-label"),e._uU(60," Plan de venta "),e.qZA(),e.TgZ(61,"mat-select",21),e.TgZ(62,"mat-option",19),e._uU(63,"Nuevo"),e.qZA(),e.TgZ(64,"mat-option",20),e._uU(65,"Usado"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"mat-form-field",2),e.TgZ(67,"mat-label"),e._uU(68,"Comentarios"),e.qZA(),e._UZ(69,"textarea",22),e.qZA(),e.TgZ(70,"section",23),e.TgZ(71,"mat-checkbox",24),e._uU(72,"Retoma"),e.qZA(),e.qZA(),e.TgZ(73,"section",23),e.TgZ(74,"mat-checkbox",25),e._uU(75,"Financiado"),e.qZA(),e.qZA(),e.TgZ(76,"div",26),e.TgZ(77,"button",27),e._uU(78,"Cancelar"),e.qZA(),e.TgZ(79,"button",28),e._uU(80,"Confirmar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&c&&(e.xp6(3),e.Q6J("formGroup",g.Form),e.xp6(41),e.Q6J("ngForOf",g.vehicles),e.xp6(5),e.Q6J("ngForOf",g.foods))},directives:[d.uh,d.xY,r._Y,r.JL,r.sg,o.KE,o.hX,T.Nt,r.Fj,r.JJ,r.u,i.gD,_.ey,Z.sg,r.nD,b.oG,f.lW,d.ZT],styles:[P]}),s})(),ue=(()=>{class s{constructor(c,g){this.dialogRef=c,this._snackBar=g,this.Form=new r.cw({datein:new r.NI("",r.kI.required),dateout:new r.NI("",r.kI.required)});var A=new Date;this.date=new Date(A.getFullYear(),A.getMonth(),A.getDate()),this.minDate=new Date(A.getFullYear(),4,14)}closeDialog(){this.Form.valid&&this.Form.controls.dateout.value>=this.Form.controls.datein.value?this.dialogRef.close(this.Form.getRawValue()):this._snackBar.open("Los valores ingresados son incorrectos","OK")}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(d.so),e.Y36(y.ux))},s.\u0275cmp=e.Xpm({type:s,selectors:[["datepicker"]],decls:23,vars:9,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","fill",1,"form-field"],["matInput","","formControlName","datein",3,"matDatepicker","max","min"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","dateout",3,"matDatepicker","max","min"],["pick",""],[1,"div-action"],["mat-button","","mat-dialog-close",""],["mat-button","","type","submit"]],template:function(c,g){if(1&c&&(e.TgZ(0,"h2",0),e._uU(1,"Rango de fechas"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return g.closeDialog()}),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Fecha inicial"),e.qZA(),e._UZ(7,"input",3),e._UZ(8,"mat-datepicker-toggle",4),e._UZ(9,"mat-datepicker",null,5),e.qZA(),e.TgZ(11,"mat-form-field",2),e.TgZ(12,"mat-label"),e._uU(13,"Fecha final"),e.qZA(),e._UZ(14,"input",6),e._UZ(15,"mat-datepicker-toggle",4),e._UZ(16,"mat-datepicker",null,7),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"button",9),e._uU(20,"Cancelar"),e.qZA(),e.TgZ(21,"button",10),e._uU(22,"Confirmar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&c){const A=e.MAs(10),I=e.MAs(17);e.xp6(3),e.Q6J("formGroup",g.Form),e.xp6(4),e.Q6J("matDatepicker",A)("max",g.date)("min",g.minDate),e.xp6(1),e.Q6J("for",A),e.xp6(6),e.Q6J("matDatepicker",I)("max",g.date)("min",g.minDate),e.xp6(1),e.Q6J("for",I)}},directives:[d.uh,d.xY,r._Y,r.JL,r.sg,o.KE,o.hX,T.Nt,r.Fj,x.hl,r.JJ,r.u,x.nW,o.R9,x.Mq,f.lW,d.ZT],styles:[P]}),s})(),ce=(()=>{class s{constructor(c,g,A){this.dialogRef=c,this._snackBar=g,this.httpClient=A,this.displayedColumns=["Mes","Dia","Visitas"],this.dataTable=[],this.dataSource=new p.by(this.dataTable),this.Form=new r.cw({datein:new r.NI("",r.kI.required),dateout:new r.NI("",r.kI.required)});var I=new Date;this.date=new Date(I.getFullYear(),I.getMonth(),I.getDate()),this.minDate=new Date(I.getFullYear(),4,14)}Submit(){this.Form.valid&&this.httpClient.post(`${h.d.API_ENDPOINT}/api/Visitnum`,{datein:this.Form.controls.datein.value,dateout:this.Form.controls.dateout.value}).subscribe(c=>{this.dataTable=c,console.log(this.dataTable),0==this.dataTable.length?this._snackBar.open("No hay informacion en esta fecha"):this.dataSource=new p.by(this.dataTable)})}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(d.so),e.Y36(y.ux),e.Y36(u.eN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["visit"]],decls:21,vars:10,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","fill",1,"form-field"],["matInput","","formControlName","datein",3,"matDatepicker","max","min"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","dateout",3,"matDatepicker","max","min"],["pick",""],["mat-stroked-button","","type","submit"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Mes"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Dia"],["matColumnDef","Visitas"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(c,g){if(1&c&&(e.TgZ(0,"h2",0),e._uU(1,"Visitas de vitrina"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return g.Submit()}),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Fecha inicial"),e.qZA(),e._UZ(7,"input",3),e._UZ(8,"mat-datepicker-toggle",4),e._UZ(9,"mat-datepicker",null,5),e.qZA(),e.TgZ(11,"mat-form-field",2),e.TgZ(12,"mat-label"),e._uU(13,"Fecha final"),e.qZA(),e._UZ(14,"input",6),e._UZ(15,"mat-datepicker-toggle",4),e._UZ(16,"mat-datepicker",null,7),e.qZA(),e.TgZ(18,"button",8),e._uU(19,"Buscar"),e.qZA(),e.qZA(),e.YNc(20,se,13,3,"ng-container",9),e.qZA()),2&c){const A=e.MAs(10),I=e.MAs(17);e.xp6(3),e.Q6J("formGroup",g.Form),e.xp6(4),e.Q6J("matDatepicker",A)("max",g.date)("min",g.minDate),e.xp6(1),e.Q6J("for",A),e.xp6(6),e.Q6J("matDatepicker",I)("max",g.date)("min",g.minDate),e.xp6(1),e.Q6J("for",I),e.xp6(5),e.Q6J("ngIf",g.dataSource.data.length>0)}},directives:[d.uh,d.xY,r._Y,r.JL,r.sg,o.KE,o.hX,T.Nt,r.Fj,x.hl,r.JJ,r.u,x.nW,o.R9,x.Mq,f.lW,Z.O5,p.BZ,p.w1,p.fO,p.ge,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk],styles:[P]}),s})();var _e=w(6461);function fe(s,v){1&s&&(e.TgZ(0,"th",8),e._uU(1,"Estado turno "),e.qZA())}function de(s,v){1&s&&(e.TgZ(0,"mat-icon",14),e._uU(1,"check_circle "),e.qZA())}function pe(s,v){1&s&&(e.TgZ(0,"mat-icon",15),e._uU(1,"cancel_presentation "),e.qZA())}function me(s,v){1&s&&(e.TgZ(0,"mat-icon",15),e._uU(1,"clear "),e.qZA())}function ge(s,v){1&s&&(e.TgZ(0,"mat-icon",16),e._uU(1,"done_all "),e.qZA())}function he(s,v){1&s&&(e.TgZ(0,"mat-icon",17),e._uU(1,"info "),e.qZA())}function ve(s,v){if(1&s&&(e.TgZ(0,"td",9),e.TgZ(1,"span"),e.YNc(2,de,2,0,"mat-icon",10),e.YNc(3,pe,2,0,"mat-icon",11),e.YNc(4,me,2,0,"mat-icon",11),e.YNc(5,ge,2,0,"mat-icon",12),e.YNc(6,he,2,0,"mat-icon",13),e._uU(7),e.qZA(),e.qZA()),2&s){const c=v.$implicit;e.xp6(2),e.Q6J("ngIf","E"===(null==c?null:c.state)),e.xp6(1),e.Q6J("ngIf","R"===(null==c?null:c.state)),e.xp6(1),e.Q6J("ngIf","C"===(null==c?null:c.state)),e.xp6(1),e.Q6J("ngIf","T"===(null==c?null:c.state)),e.xp6(1),e.Q6J("ngIf","I"===(null==c?null:c.state)),e.xp6(1),e.hij(" ",c.descripcion," ")}}function Te(s,v){1&s&&(e.TgZ(0,"th",8),e._uU(1," Asesor "),e.qZA())}function Ae(s,v){if(1&s&&(e.TgZ(0,"td",9),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.name," ")}}function ye(s,v){1&s&&(e.TgZ(0,"th",8),e._uU(1," Cliente "),e.qZA())}function be(s,v){if(1&s&&(e.TgZ(0,"td",9),e._uU(1),e.qZA()),2&s){const c=v.$implicit;e.xp6(1),e.hij(" ",c.cliente," ")}}function we(s,v){1&s&&e._UZ(0,"tr",18)}function Ze(s,v){1&s&&e._UZ(0,"tr",19)}const Y="table[_ngcontent-%COMP%]{margin-top:3%;width:100%}mat-card[_ngcontent-%COMP%]{margin:2%}mat-progress-bar[_ngcontent-%COMP%]{height:10px;border-radius:2px}  .mat-progress-bar-fill:after{background-color:green}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.icon-avaliable[_ngcontent-%COMP%]{color:green;vertical-align:middle;margin-right:5%}.icon-busy[_ngcontent-%COMP%]{color:red;vertical-align:middle;margin-right:5%}.icon-finish[_ngcontent-%COMP%]{color:#00f;vertical-align:middle;margin-right:5%}.icon-info[_ngcontent-%COMP%]{color:orange;vertical-align:middle;margin-right:5%}.custom-modalbox[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{height:400px;width:600px;border-radius:10px;background:lightcyan;color:#039be5}";let xe=(()=>{class s{constructor(c,g){this.dialog=c,this.session=g,this.displayedColumns=["Estado turno","Asesor","Cliente"],this.dataTable=[],this.dataSource=new p.by(this.dataTable),this.socket=this.session.getSocket(),this.getTurns()}ngOnInit(){}getTurns(){this.socket.connect(),this.socket.on("refreshTurns",c=>{console.log(JSON.parse(c.turns)),this.dataTable=JSON.parse(c.turns),this.dataSource=new p.by(this.dataTable)}),this.socket.on("notification",c=>{this.dialog.open(Ce,{data:{name:c.name+" ES SOLICITADO EN RECEPCION"},width:"900px",panelClass:"custom-modalbox"})})}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(d.uw),e.Y36(t.m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-view-turns"]],decls:18,vars:3,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Estado turno"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Asesor"],["matColumnDef","Cliente"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["class","icon-avaliable",4,"ngIf"],["class","icon-busy",4,"ngIf"],["class","icon-finsh",4,"ngIf"],["class","icon-info",4,"ngIf"],[1,"icon-avaliable"],[1,"icon-busy"],[1,"icon-finsh"],[1,"icon-info"],["mat-header-row",""],["mat-row",""]],template:function(c,g){1&c&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-title"),e._uU(2," PANEL DE TURNOS"),e.qZA(),e.TgZ(3,"mat-card-subtitle"),e._uU(4," En esta seccion se visualizara el estado de turnos de los asesores comerciales para la atencion de clientes en vitrina "),e.qZA(),e.TgZ(5,"mat-card-content"),e.TgZ(6,"table",0),e.ynx(7,1),e.YNc(8,fe,2,0,"th",2),e.YNc(9,ve,8,6,"td",3),e.BQk(),e.ynx(10,4),e.YNc(11,Te,2,0,"th",2),e.YNc(12,Ae,2,1,"td",3),e.BQk(),e.ynx(13,5),e.YNc(14,ye,2,0,"th",2),e.YNc(15,be,2,1,"td",3),e.BQk(),e.YNc(16,we,1,0,"tr",6),e.YNc(17,Ze,1,0,"tr",7),e.qZA(),e.qZA(),e.qZA()),2&c&&(e.xp6(6),e.Q6J("dataSource",g.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",g.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",g.displayedColumns))},directives:[n.a8,n.n5,n.$j,n.dn,p.BZ,p.w1,p.fO,p.ge,p.Dz,p.ev,Z.O5,l.Hw,p.as,p.XQ,p.nj,p.Gk],styles:[Y]}),s})(),Ce=(()=>{class s{constructor(c,g){this.dialogRef=c,this.name="",this.sound=new _e.Howl({src:["assets/Notifications.mp3"],loop:!0}),this.name=g?g.name:""}ngOnInit(){setTimeout(()=>{this.sound.stop(),this.dialogRef.close()},1e4),this.name&&this.sound.play()}closeDialog(){this.sound.stop(),this.dialogRef.close()}}return s.\u0275fac=function(c){return new(c||s)(e.Y36(d.so),e.Y36(d.WI))},s.\u0275cmp=e.Xpm({type:s,selectors:[["notification-dialog"]],decls:4,vars:1,consts:[["mat-dialog-title",""]],template:function(c,g){1&c&&(e.TgZ(0,"h2",0),e._uU(1,"Solicitud de turno"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA()),2&c&&(e.xp6(3),e.hij(" ",g.name," "))},directives:[d.uh,d.xY],styles:[Y]}),s})();var R=w(7721);const Ie=[{path:"",canActivate:[R.j],component:H},{path:"turns",canActivate:[R.j],component:H},{path:"view",canActivate:[R.j],component:xe}];let De=(()=>{class s{}return s.\u0275fac=function(c){return new(c||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[Z.ez,D.SJ,a.Bz.forChild(Ie)],a.Bz]}),s})()},8401:(L,S)=>{"use strict";var Z=function(){function m(){}return m.EOL="\r\n",m.BOM="\ufeff",m.DEFAULT_FIELD_SEPARATOR=",",m.DEFAULT_DECIMAL_SEPARATOR=".",m.DEFAULT_QUOTE='"',m.DEFAULT_SHOW_TITLE=!1,m.DEFAULT_TITLE="My Report",m.DEFAULT_FILENAME="mycsv.csv",m.DEFAULT_SHOW_LABELS=!1,m.DEFAULT_USE_BOM=!0,m.DEFAULT_HEADER=[],m.DEFAULT_NO_DOWNLOAD=!1,m.DEFAULT_NULL_TO_EMPTY_STRING=!1,m}();S.hd={filename:Z.DEFAULT_FILENAME,fieldSeparator:Z.DEFAULT_FIELD_SEPARATOR,quoteStrings:Z.DEFAULT_QUOTE,decimalseparator:Z.DEFAULT_DECIMAL_SEPARATOR,showLabels:Z.DEFAULT_SHOW_LABELS,showTitle:Z.DEFAULT_SHOW_TITLE,title:Z.DEFAULT_TITLE,useBom:Z.DEFAULT_USE_BOM,headers:Z.DEFAULT_HEADER,noDownload:Z.DEFAULT_NO_DOWNLOAD,nullToEmptyString:Z.DEFAULT_NULL_TO_EMPTY_STRING};var D=function(){function m(h,e,d){this.csv="";var y=d||{};this.data="object"!=typeof h?JSON.parse(h):h,this._options=function p(m){for(var h=[],e=1;e<arguments.length;e++)h[e-1]=arguments[e];for(var d,t,y=u(m),n=1;n<arguments.length;n++){for(var o in d=Object(arguments[n]))a.call(d,o)&&(y[o]=d[o]);if(Object.getOwnPropertySymbols){t=Object.getOwnPropertySymbols(d);for(var i=0;i<t.length;i++)r.call(d,t[i])&&(y[t[i]]=d[t[i]])}}return y}({},S.hd,y),this._options.filename&&(this._options.filename=e),this.generateCsv()}return m.prototype.generateCsv=function(){if(this._options.useBom&&(this.csv+=Z.BOM),this._options.showTitle&&(this.csv+=this._options.title+"\r\n\n"),this.getHeaders(),this.getBody(),""!=this.csv){if(this._options.noDownload)return this.csv;var h=new Blob([this.csv],{type:"text/csv;charset=utf8;"});if(navigator.msSaveBlob){var e=this._options.filename.replace(/ /g,"_")+".csv";navigator.msSaveBlob(h,e)}else{encodeURI(this.csv);var y=document.createElement("a");y.href=URL.createObjectURL(h),y.setAttribute("visibility","hidden"),y.download=this._options.filename.replace(/ /g,"_")+".csv",document.body.appendChild(y),y.click(),document.body.removeChild(y)}}else console.log("Invalid data")},m.prototype.getHeaders=function(){var h=this;if(this._options.headers.length>0){var d=this._options.headers.reduce(function(y,t){return y+t+h._options.fieldSeparator},"");d=d.slice(0,-1),this.csv+=d+Z.EOL}},m.prototype.getBody=function(){for(var h=0;h<this.data.length;h++){var e="";for(var d in this.data[h])e+=this.formatData(this.data[h][d])+this._options.fieldSeparator;e=e.slice(0,-1),this.csv+=e+Z.EOL}},m.prototype.formatData=function(h){return"locale"===this._options.decimalseparator&&m.isFloat(h)?h.toLocaleString():"."!==this._options.decimalseparator&&m.isFloat(h)?h.toString().replace(".",this._options.decimalseparator):"string"==typeof h?(h=h.replace(/"/g,'""'),(this._options.quoteStrings||h.indexOf(",")>-1||h.indexOf("\n")>-1||h.indexOf("\r")>-1)&&(h=this._options.quoteStrings+h+this._options.quoteStrings),h):this._options.nullToEmptyString?null===h?h="":h:"boolean"==typeof h?h?"TRUE":"FALSE":h},m.isFloat=function(h){return+h===h&&(!isFinite(h)||Boolean(h%1))},m}();S.nk=D;var a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function u(m){if(null==m)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}},6461:(L,S)=>{var Z;!function(){"use strict";var D=function(){this.init()};D.prototype={init:function(){var t=this||a;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var n=this||a;if(t=parseFloat(t),n.ctx||y(),void 0!==t&&t>=0&&t<=1){if(n._volume=t,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(t,a.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var i=n._howls[o]._getSoundIds(),_=0;_<i.length;_++){var f=n._howls[o]._soundById(i[_]);f&&f._node&&(f._node.volume=f._volume*t)}return n}return n._volume},mute:function(t){var n=this||a;n.ctx||y(),n._muted=t,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(t?0:n._volume,a.ctx.currentTime);for(var o=0;o<n._howls.length;o++)if(!n._howls[o]._webAudio)for(var i=n._howls[o]._getSoundIds(),_=0;_<i.length;_++){var f=n._howls[o]._soundById(i[_]);f&&f._node&&(f._node.muted=!!t||f._muted)}return n},stop:function(){for(var t=this||a,n=0;n<t._howls.length;n++)t._howls[n].stop();return t},unload:function(){for(var t=this||a,n=t._howls.length-1;n>=0;n--)t._howls[n].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,y()),t},codecs:function(t){return(this||a)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||a;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(o){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(o){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||a,n=null;try{n="undefined"!=typeof Audio?new Audio:null}catch(x){return t}if(!n||"function"!=typeof n.canPlayType)return t;var o=n.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator?t._navigator.userAgent:"",_=i.match(/OPR\/([0-6].)/g),f=_&&parseInt(_[0].split("/")[1],10)<33,l=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),T=i.match(/Version\/(.*?) /),b=l&&T&&parseInt(T[1],10)<15;return t._codecs={mp3:!(f||!o&&!n.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(b||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(b||!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||a;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&44100!==t.ctx.sampleRate&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var n=function(o){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,t._releaseHtml5Audio(i)}catch(x){t.noAudio=!0;break}for(var _=0;_<t._howls.length;_++)if(!t._howls[_]._webAudio)for(var f=t._howls[_]._getSoundIds(),l=0;l<f.length;l++){var T=t._howls[_]._soundById(f[l]);T&&T._node&&!T._node._unlocked&&(T._node._unlocked=!0,T._node.load())}t._autoResume();var b=t.ctx.createBufferSource();b.buffer=t._scratchBuffer,b.connect(t.ctx.destination),void 0===b.start?b.noteOn(0):b.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),b.onended=function(){b.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var x=0;x<t._howls.length;x++)t._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),t}},_obtainHtml5Audio:function(){var t=this||a;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var n=(new Audio).play();return n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var n=this||a;return t._unlocked&&n._html5AudioPool.push(t),n},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&a.usingWebAudio){for(var n=0;n<t._howls.length;n++)if(t._howls[n]._webAudio)for(var o=0;o<t._howls[n]._sounds.length;o++)if(!t._howls[n]._sounds[o]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var i=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(i,i)}},3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&a.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then(function(){t.state="running";for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var a=new D,r=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(t){var n=this;return a.ctx||y(),n._autoplay=t.autoplay||!1,n._format="string"!=typeof t.format?t.format:[t.format],n._html5=t.html5||!1,n._muted=t.mute||!1,n._loop=t.loop||!1,n._pool=t.pool||5,n._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,n._rate=t.rate||1,n._sprite=t.sprite||{},n._src="string"!=typeof t.src?t.src:[t.src],n._volume=void 0!==t.volume?t.volume:1,n._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=t.onend?[{fn:t.onend}]:[],n._onfade=t.onfade?[{fn:t.onfade}]:[],n._onload=t.onload?[{fn:t.onload}]:[],n._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],n._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],n._onpause=t.onpause?[{fn:t.onpause}]:[],n._onplay=t.onplay?[{fn:t.onplay}]:[],n._onstop=t.onstop?[{fn:t.onstop}]:[],n._onmute=t.onmute?[{fn:t.onmute}]:[],n._onvolume=t.onvolume?[{fn:t.onvolume}]:[],n._onrate=t.onrate?[{fn:t.onrate}]:[],n._onseek=t.onseek?[{fn:t.onseek}]:[],n._onunlock=t.onunlock?[{fn:t.onunlock}]:[],n._onresume=[],n._webAudio=a.usingWebAudio&&!n._html5,void 0!==a.ctx&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&"none"!==n._preload&&n.load(),n},load:function(){var t=this,n=null;if(a.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var o=0;o<t._src.length;o++){var i,_;if(t._format&&t._format[o])i=t._format[o];else{if("string"!=typeof(_=t._src[o])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(_))||(i=/\.([^.]+)$/.exec(_.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&a.codecs(i)){n=t._src[o];break}}if(n)return t._src=n,t._state="loading","https:"===window.location.protocol&&"http:"===n.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new u(t),t._webAudio&&m(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,n){var o=this,i=null;if("number"==typeof t)i=t,t=null;else{if("string"==typeof t&&"loaded"===o._state&&!o._sprite[t])return null;if(void 0===t&&(t="__default",!o._playLock)){for(var _=0,f=0;f<o._sounds.length;f++)o._sounds[f]._paused&&!o._sounds[f]._ended&&(_++,i=o._sounds[f]._id);1===_?t=null:i=null}}var l=i?o._soundById(i):o._inactiveSound();if(!l)return null;if(i&&!t&&(t=l._sprite||"__default"),"loaded"!==o._state){l._sprite=t,l._ended=!1;var T=l._id;return o._queue.push({event:"play",action:function(){o.play(T)}}),T}if(i&&!l._paused)return n||o._loadQueue("play"),l._id;o._webAudio&&a._autoResume();var b=Math.max(0,l._seek>0?l._seek:o._sprite[t][0]/1e3),x=Math.max(0,(o._sprite[t][0]+o._sprite[t][1])/1e3-b),k=1e3*x/Math.abs(l._rate),N=o._sprite[t][0]/1e3,E=(o._sprite[t][0]+o._sprite[t][1])/1e3;l._sprite=t,l._ended=!1;var F=function(){l._paused=!1,l._seek=b,l._start=N,l._stop=E,l._loop=!(!l._loop&&!o._sprite[t][2])};if(!(b>=E)){var C=l._node;if(o._webAudio){var U=function(){o._playLock=!1,F(),o._refreshBuffer(l),C.gain.setValueAtTime(l._muted||o._muted?0:l._volume,a.ctx.currentTime),l._playStart=a.ctx.currentTime,void 0===C.bufferSource.start?C.bufferSource.noteGrainOn(0,b,l._loop?86400:x):C.bufferSource.start(0,b,l._loop?86400:x),k!==1/0&&(o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),k)),n||setTimeout(function(){o._emit("play",l._id),o._loadQueue()},0)};"running"===a.state&&"interrupted"!==a.ctx.state?U():(o._playLock=!0,o.once("resume",U),o._clearTimer(l._id))}else{var q=function(){C.currentTime=b,C.muted=l._muted||o._muted||a._muted||C.muted,C.volume=l._volume*a.volume(),C.playbackRate=l._rate;try{var O=C.play();if(O&&"undefined"!=typeof Promise&&(O instanceof Promise||"function"==typeof O.then)?(o._playLock=!0,F(),O.then(function(){o._playLock=!1,C._unlocked=!0,n?o._loadQueue():o._emit("play",l._id)}).catch(function(){o._playLock=!1,o._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):n||(o._playLock=!1,F(),o._emit("play",l._id)),C.playbackRate=l._rate,C.paused)return void o._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||l._loop?o._endTimers[l._id]=setTimeout(o._ended.bind(o,l),k):(o._endTimers[l._id]=function(){o._ended(l),C.removeEventListener("ended",o._endTimers[l._id],!1)},C.addEventListener("ended",o._endTimers[l._id],!1))}catch(B){o._emit("playerror",l._id,B)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===C.src&&(C.src=o._src,C.load());var V=window&&window.ejecta||!C.readyState&&a._navigator.isCocoonJS;if(C.readyState>=3||V)q();else{o._playLock=!0,o._state="loading";var M=function(){o._state="loaded",q(),C.removeEventListener(a._canPlayEvent,M,!1)};C.addEventListener(a._canPlayEvent,M,!1),o._clearTimer(l._id)}}return l._id}o._ended(l)},pause:function(t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(t)}}),n;for(var o=n._getSoundIds(t),i=0;i<o.length;i++){n._clearTimer(o[i]);var _=n._soundById(o[i]);if(_&&!_._paused&&(_._seek=n.seek(o[i]),_._rateSeek=0,_._paused=!0,n._stopFade(o[i]),_._node))if(n._webAudio){if(!_._node.bufferSource)continue;void 0===_._node.bufferSource.stop?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),n._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||n._emit("pause",_?_._id:null)}return n},stop:function(t,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(t)}}),o;for(var i=o._getSoundIds(t),_=0;_<i.length;_++){o._clearTimer(i[_]);var f=o._soundById(i[_]);f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,o._stopFade(i[_]),f._node&&(o._webAudio?f._node.bufferSource&&(void 0===f._node.bufferSource.stop?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),o._cleanBuffer(f._node)):(!isNaN(f._node.duration)||f._node.duration===1/0)&&(f._node.currentTime=f._start||0,f._node.pause(),f._node.duration===1/0&&o._clearSound(f._node))),n||o._emit("stop",f._id))}return o},mute:function(t,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"mute",action:function(){o.mute(t,n)}}),o;if(void 0===n){if("boolean"!=typeof t)return o._muted;o._muted=t}for(var i=o._getSoundIds(n),_=0;_<i.length;_++){var f=o._soundById(i[_]);f&&(f._muted=t,f._interval&&o._stopFade(f._id),o._webAudio&&f._node?f._node.gain.setValueAtTime(t?0:f._volume,a.ctx.currentTime):f._node&&(f._node.muted=!!a._muted||t),o._emit("mute",f._id))}return o},volume:function(){var o,i,l,t=this,n=arguments;if(0===n.length)return t._volume;if(1===n.length||2===n.length&&void 0===n[1]){var _=t._getSoundIds(),f=_.indexOf(n[0]);f>=0?i=parseInt(n[0],10):o=parseFloat(n[0])}else n.length>=2&&(o=parseFloat(n[0]),i=parseInt(n[1],10));if(!(void 0!==o&&o>=0&&o<=1))return(l=i?t._soundById(i):t._sounds[0])?l._volume:0;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,n)}}),t;void 0===i&&(t._volume=o),i=t._getSoundIds(i);for(var T=0;T<i.length;T++)(l=t._soundById(i[T]))&&(l._volume=o,n[2]||t._stopFade(i[T]),t._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(o,a.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=o*a.volume()),t._emit("volume",l._id));return t},fade:function(t,n,o,i){var _=this;if("loaded"!==_._state||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(t,n,o,i)}}),_;t=Math.min(Math.max(0,parseFloat(t)),1),n=Math.min(Math.max(0,parseFloat(n)),1),o=parseFloat(o),_.volume(t,i);for(var f=_._getSoundIds(i),l=0;l<f.length;l++){var T=_._soundById(f[l]);if(T){if(i||_._stopFade(f[l]),_._webAudio&&!T._muted){var b=a.ctx.currentTime,x=b+o/1e3;T._volume=t,T._node.gain.setValueAtTime(t,b),T._node.gain.linearRampToValueAtTime(n,x)}_._startFadeInterval(T,t,n,o,f[l],void 0===i)}}return _},_startFadeInterval:function(t,n,o,i,_,f){var l=this,T=n,b=o-n,x=Math.abs(b/.01),k=Math.max(4,x>0?i/x:i),N=Date.now();t._fadeTo=o,t._interval=setInterval(function(){var E=(Date.now()-N)/i;N=Date.now(),T+=b*E,T=Math.round(100*T)/100,T=b<0?Math.max(o,T):Math.min(o,T),l._webAudio?t._volume=T:l.volume(T,t._id,!0),f&&(l._volume=T),(o<n&&T<=o||o>n&&T>=o)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,l.volume(o,t._id),l._emit("fade",t._id))},k)},_stopFade:function(t){var n=this,o=n._soundById(t);return o&&o._interval&&(n._webAudio&&o._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(o._interval),o._interval=null,n.volume(o._fadeTo,t),o._fadeTo=null,n._emit("fade",t)),n},loop:function(){var o,i,_,t=this,n=arguments;if(0===n.length)return t._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(_=t._soundById(parseInt(n[0],10)))&&_._loop;t._loop=o=n[0]}else 2===n.length&&(o=n[0],i=parseInt(n[1],10));for(var f=t._getSoundIds(i),l=0;l<f.length;l++)(_=t._soundById(f[l]))&&(_._loop=o,t._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=o,o&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,t.playing(f[l])&&(t.pause(f[l],!0),t.play(f[l],!0)))));return t},rate:function(){var o,i,l,t=this,n=arguments;if(0===n.length)i=t._sounds[0]._id;else if(1===n.length){var _=t._getSoundIds(),f=_.indexOf(n[0]);f>=0?i=parseInt(n[0],10):o=parseFloat(n[0])}else 2===n.length&&(o=parseFloat(n[0]),i=parseInt(n[1],10));if("number"!=typeof o)return(l=t._soundById(i))?l._rate:t._rate;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,n)}}),t;void 0===i&&(t._rate=o),i=t._getSoundIds(i);for(var T=0;T<i.length;T++)if(l=t._soundById(i[T])){t.playing(i[T])&&(l._rateSeek=t.seek(i[T]),l._playStart=t._webAudio?a.ctx.currentTime:l._playStart),l._rate=o,t._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(o,a.ctx.currentTime):l._node&&(l._node.playbackRate=o);var b=t.seek(i[T]),x=(t._sprite[l._sprite][0]+t._sprite[l._sprite][1])/1e3-b,k=1e3*x/Math.abs(l._rate);(t._endTimers[i[T]]||!l._paused)&&(t._clearTimer(i[T]),t._endTimers[i[T]]=setTimeout(t._ended.bind(t,l),k)),t._emit("rate",l._id)}return t},seek:function(){var o,i,t=this,n=arguments;if(0===n.length)t._sounds.length&&(i=t._sounds[0]._id);else if(1===n.length){var _=t._getSoundIds(),f=_.indexOf(n[0]);f>=0?i=parseInt(n[0],10):t._sounds.length&&(i=t._sounds[0]._id,o=parseFloat(n[0]))}else 2===n.length&&(o=parseFloat(n[0]),i=parseInt(n[1],10));if(void 0===i)return 0;if("number"==typeof o&&("loaded"!==t._state||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,n)}}),t;var l=t._soundById(i);if(l){if(!("number"==typeof o&&o>=0)){if(t._webAudio){var k=t.playing(i)?a.ctx.currentTime-l._playStart:0,N=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(N+k*Math.abs(l._rate))}return l._node.currentTime}var T=t.playing(i);T&&t.pause(i,!0),l._seek=o,l._ended=!1,t._clearTimer(i),!t._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=o);var b=function(){T&&t.play(i,!0),t._emit("seek",i)};if(T&&!t._webAudio){var x=function(){t._playLock?setTimeout(x,0):b()};setTimeout(x,0)}else b()}return t},playing:function(t){var n=this;if("number"==typeof t){var o=n._soundById(t);return!!o&&!o._paused}for(var i=0;i<n._sounds.length;i++)if(!n._sounds[i]._paused)return!0;return!1},duration:function(t){var n=this,o=n._duration,i=n._soundById(t);return i&&(o=n._sprite[i._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var t=this,n=t._sounds,o=0;o<n.length;o++)n[o]._paused||t.stop(n[o]._id),t._webAudio||(t._clearSound(n[o]._node),n[o]._node.removeEventListener("error",n[o]._errorFn,!1),n[o]._node.removeEventListener(a._canPlayEvent,n[o]._loadFn,!1),n[o]._node.removeEventListener("ended",n[o]._endFn,!1),a._releaseHtml5Audio(n[o]._node)),delete n[o]._node,t._clearTimer(n[o]._id);var i=a._howls.indexOf(t);i>=0&&a._howls.splice(i,1);var _=!0;for(o=0;o<a._howls.length;o++)if(a._howls[o]._src===t._src||t._src.indexOf(a._howls[o]._src)>=0){_=!1;break}return p&&_&&delete p[t._src],a.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,n,o,i){return"function"==typeof n&&this["_on"+t].push(i?{id:o,fn:n,once:i}:{id:o,fn:n}),this},off:function(t,n,o){var i=this,_=i["_on"+t],f=0;if("number"==typeof n&&(o=n,n=null),n||o)for(f=0;f<_.length;f++){var l=o===_[f].id;if(n===_[f].fn&&l||!n&&l){_.splice(f,1);break}}else if(t)i["_on"+t]=[];else{var T=Object.keys(i);for(f=0;f<T.length;f++)0===T[f].indexOf("_on")&&Array.isArray(i[T[f]])&&(i[T[f]]=[])}return i},once:function(t,n,o){return this.on(t,n,o,1),this},_emit:function(t,n,o){for(var i=this,_=i["_on"+t],f=_.length-1;f>=0;f--)(!_[f].id||_[f].id===n||"load"===t)&&(setTimeout(function(l){l.call(this,n,o)}.bind(i,_[f].fn),0),_[f].once&&i.off(t,_[f].fn,_[f].id));return i._loadQueue(t),i},_loadQueue:function(t){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===t&&(n._queue.shift(),n._loadQueue()),t||o.action()}return n},_ended:function(t){var n=this,o=t._sprite;if(!n._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(n._ended.bind(n,t),100),n;var i=!(!t._loop&&!n._sprite[o][2]);if(n._emit("end",t._id),!n._webAudio&&i&&n.stop(t._id,!0).play(t._id),n._webAudio&&i){n._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=a.ctx.currentTime;var _=1e3*(t._stop-t._start)/Math.abs(t._rate);n._endTimers[t._id]=setTimeout(n._ended.bind(n,t),_)}return n._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,n._clearTimer(t._id),n._cleanBuffer(t._node),a._autoSuspend()),!n._webAudio&&!i&&n.stop(t._id,!0),n},_clearTimer:function(t){var n=this;if(n._endTimers[t]){if("function"!=typeof n._endTimers[t])clearTimeout(n._endTimers[t]);else{var o=n._soundById(t);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[t],!1)}delete n._endTimers[t]}return n},_soundById:function(t){for(var n=this,o=0;o<n._sounds.length;o++)if(t===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var t=this;t._drain();for(var n=0;n<t._sounds.length;n++)if(t._sounds[n]._ended)return t._sounds[n].reset();return new u(t)},_drain:function(){var t=this,n=t._pool,o=0,i=0;if(!(t._sounds.length<n)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&o++;for(i=t._sounds.length-1;i>=0;i--){if(o<=n)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),o--)}}},_getSoundIds:function(t){if(void 0===t){for(var o=[],i=0;i<this._sounds.length;i++)o.push(this._sounds[i]._id);return o}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=a.ctx.createBufferSource(),t._node.bufferSource.buffer=p[this._src],t._node.bufferSource.connect(t._panner?t._panner:t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,a.ctx.currentTime),this},_cleanBuffer:function(t){var o=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(a._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),o))try{t.bufferSource.buffer=a._scratchBuffer}catch(i){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var u=function(t){this._parent=t,this.init()};u.prototype={init:function(){var t=this,n=t._parent;return t._muted=n._muted,t._loop=n._loop,t._volume=n._volume,t._rate=n._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++a._counter,n._sounds.push(t),t.create(),t},create:function(){var t=this,n=t._parent,o=a._muted||t._muted||t._parent._muted?0:t._volume;return n._webAudio?(t._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),t._node.gain.setValueAtTime(o,a.ctx.currentTime),t._node.paused=!0,t._node.connect(a.masterGain)):a.noAudio||(t._node=a._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(a._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=n._src,t._node.preload=!0===n._preload?"auto":n._preload,t._node.volume=o*a.volume(),t._node.load()),t},reset:function(){var t=this,n=t._parent;return t._muted=n._muted,t._loop=n._loop,t._volume=n._volume,t._rate=n._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++a._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,n=t._parent;n._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue()),t._node.removeEventListener(a._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,n=t._parent;n._duration===1/0&&(n._duration=Math.ceil(10*t._node.duration)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=1e3*n._duration),n._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var p={},m=function(t){var n=t._src;if(p[n])return t._duration=p[n].duration,void d(t);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),i=new Uint8Array(o.length),_=0;_<o.length;++_)i[_]=o.charCodeAt(_);e(i.buffer,t)}else{var f=new XMLHttpRequest;f.open(t._xhr.method,n,!0),f.withCredentials=t._xhr.withCredentials,f.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(l){f.setRequestHeader(l,t._xhr.headers[l])}),f.onload=function(){var l=(f.status+"")[0];"0"===l||"2"===l||"3"===l?e(f.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+f.status+".")},f.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete p[n],t.load())},h(f)}},h=function(t){try{t.send()}catch(n){t.onerror()}},e=function(t,n){var o=function(){n._emit("loaderror",null,"Decoding audio data failed.")},i=function(_){_&&n._sounds.length>0?(p[n._src]=_,d(n,_)):o()};"undefined"!=typeof Promise&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(t).then(i).catch(o):a.ctx.decodeAudioData(t,i,o)},d=function(t,n){n&&!t._duration&&(t._duration=n.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},y=function(){if(a.usingWebAudio){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(_){a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),n=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),o=n?parseInt(n[1],10):null;if(t&&o&&o<9){var i=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());a._navigator&&!i&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}};void 0!==(Z=function(){return{Howler:a,Howl:r}}.apply(S,[]))&&(L.exports=Z),S.Howler=a,S.Howl=r,"undefined"!=typeof global?(global.HowlerGlobal=D,global.Howler=a,global.Howl=r,global.Sound=u):"undefined"!=typeof window&&(window.HowlerGlobal=D,window.Howler=a,window.Howl=r,window.Sound=u)}(),function(){"use strict";var a;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(a){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var u=r._howls.length-1;u>=0;u--)r._howls[u].stereo(a);return r},HowlerGlobal.prototype.pos=function(a,r,u){var p=this;return p.ctx&&p.ctx.listener?"number"!=typeof a?p._pos:(p._pos=[a,r="number"!=typeof r?p._pos[1]:r,u="number"!=typeof u?p._pos[2]:u],void 0!==p.ctx.listener.positionX?(p.ctx.listener.positionX.setTargetAtTime(p._pos[0],Howler.ctx.currentTime,.1),p.ctx.listener.positionY.setTargetAtTime(p._pos[1],Howler.ctx.currentTime,.1),p.ctx.listener.positionZ.setTargetAtTime(p._pos[2],Howler.ctx.currentTime,.1)):p.ctx.listener.setPosition(p._pos[0],p._pos[1],p._pos[2]),p):p},HowlerGlobal.prototype.orientation=function(a,r,u,p,m,h){var e=this;if(!e.ctx||!e.ctx.listener)return e;var d=e._orientation;return"number"!=typeof a?d:(e._orientation=[a,r="number"!=typeof r?d[1]:r,u="number"!=typeof u?d[2]:u,p="number"!=typeof p?d[3]:p,m="number"!=typeof m?d[4]:m,h="number"!=typeof h?d[5]:h],void 0!==e.ctx.listener.forwardX?(e.ctx.listener.forwardX.setTargetAtTime(a,Howler.ctx.currentTime,.1),e.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),e.ctx.listener.forwardZ.setTargetAtTime(u,Howler.ctx.currentTime,.1),e.ctx.listener.upX.setTargetAtTime(p,Howler.ctx.currentTime,.1),e.ctx.listener.upY.setTargetAtTime(m,Howler.ctx.currentTime,.1),e.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):e.ctx.listener.setOrientation(a,r,u,p,m,h),e)},Howl.prototype.init=(a=Howl.prototype.init,function(r){var u=this;return u._orientation=r.orientation||[1,0,0],u._stereo=r.stereo||null,u._pos=r.pos||null,u._pannerAttr={coneInnerAngle:void 0!==r.coneInnerAngle?r.coneInnerAngle:360,coneOuterAngle:void 0!==r.coneOuterAngle?r.coneOuterAngle:360,coneOuterGain:void 0!==r.coneOuterGain?r.coneOuterGain:0,distanceModel:void 0!==r.distanceModel?r.distanceModel:"inverse",maxDistance:void 0!==r.maxDistance?r.maxDistance:1e4,panningModel:void 0!==r.panningModel?r.panningModel:"HRTF",refDistance:void 0!==r.refDistance?r.refDistance:1,rolloffFactor:void 0!==r.rolloffFactor?r.rolloffFactor:1},u._onstereo=r.onstereo?[{fn:r.onstereo}]:[],u._onpos=r.onpos?[{fn:r.onpos}]:[],u._onorientation=r.onorientation?[{fn:r.onorientation}]:[],a.call(this,r)}),Howl.prototype.stereo=function(a,r){var u=this;if(!u._webAudio)return u;if("loaded"!==u._state)return u._queue.push({event:"stereo",action:function(){u.stereo(a,r)}}),u;var p=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===r){if("number"!=typeof a)return u._stereo;u._stereo=a,u._pos=[a,0,0]}for(var m=u._getSoundIds(r),h=0;h<m.length;h++){var e=u._soundById(m[h]);if(e){if("number"!=typeof a)return e._stereo;e._stereo=a,e._pos=[a,0,0],e._node&&(e._pannerAttr.panningModel="equalpower",(!e._panner||!e._panner.pan)&&D(e,p),"spatial"===p?void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(a,Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):e._panner.setPosition(a,0,0):e._panner.pan.setValueAtTime(a,Howler.ctx.currentTime)),u._emit("stereo",e._id)}}return u},Howl.prototype.pos=function(a,r,u,p){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"pos",action:function(){m.pos(a,r,u,p)}}),m;if(r="number"!=typeof r?0:r,u="number"!=typeof u?-.5:u,void 0===p){if("number"!=typeof a)return m._pos;m._pos=[a,r,u]}for(var h=m._getSoundIds(p),e=0;e<h.length;e++){var d=m._soundById(h[e]);if(d){if("number"!=typeof a)return d._pos;d._pos=[a,r,u],d._node&&((!d._panner||d._panner.pan)&&D(d,"spatial"),void 0!==d._panner.positionX?(d._panner.positionX.setValueAtTime(a,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(u,Howler.ctx.currentTime)):d._panner.setPosition(a,r,u)),m._emit("pos",d._id)}}return m},Howl.prototype.orientation=function(a,r,u,p){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"orientation",action:function(){m.orientation(a,r,u,p)}}),m;if(r="number"!=typeof r?m._orientation[1]:r,u="number"!=typeof u?m._orientation[2]:u,void 0===p){if("number"!=typeof a)return m._orientation;m._orientation=[a,r,u]}for(var h=m._getSoundIds(p),e=0;e<h.length;e++){var d=m._soundById(h[e]);if(d){if("number"!=typeof a)return d._orientation;d._orientation=[a,r,u],d._node&&(d._panner||(d._pos||(d._pos=m._pos||[0,0,-.5]),D(d,"spatial")),void 0!==d._panner.orientationX?(d._panner.orientationX.setValueAtTime(a,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(u,Howler.ctx.currentTime)):d._panner.setOrientation(a,r,u)),m._emit("orientation",d._id)}}return m},Howl.prototype.pannerAttr=function(){var u,p,m,a=this,r=arguments;if(!a._webAudio)return a;if(0===r.length)return a._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(m=a._soundById(parseInt(r[0],10)))?m._pannerAttr:a._pannerAttr;u=r[0],void 0===p&&(u.pannerAttr||(u.pannerAttr={coneInnerAngle:u.coneInnerAngle,coneOuterAngle:u.coneOuterAngle,coneOuterGain:u.coneOuterGain,distanceModel:u.distanceModel,maxDistance:u.maxDistance,refDistance:u.refDistance,rolloffFactor:u.rolloffFactor,panningModel:u.panningModel}),a._pannerAttr={coneInnerAngle:void 0!==u.pannerAttr.coneInnerAngle?u.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:void 0!==u.pannerAttr.coneOuterAngle?u.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:void 0!==u.pannerAttr.coneOuterGain?u.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:void 0!==u.pannerAttr.distanceModel?u.pannerAttr.distanceModel:a._distanceModel,maxDistance:void 0!==u.pannerAttr.maxDistance?u.pannerAttr.maxDistance:a._maxDistance,refDistance:void 0!==u.pannerAttr.refDistance?u.pannerAttr.refDistance:a._refDistance,rolloffFactor:void 0!==u.pannerAttr.rolloffFactor?u.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:void 0!==u.pannerAttr.panningModel?u.pannerAttr.panningModel:a._panningModel})}else 2===r.length&&(u=r[0],p=parseInt(r[1],10));for(var h=a._getSoundIds(p),e=0;e<h.length;e++)if(m=a._soundById(h[e])){var d=m._pannerAttr;d={coneInnerAngle:void 0!==u.coneInnerAngle?u.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:void 0!==u.coneOuterAngle?u.coneOuterAngle:d.coneOuterAngle,coneOuterGain:void 0!==u.coneOuterGain?u.coneOuterGain:d.coneOuterGain,distanceModel:void 0!==u.distanceModel?u.distanceModel:d.distanceModel,maxDistance:void 0!==u.maxDistance?u.maxDistance:d.maxDistance,refDistance:void 0!==u.refDistance?u.refDistance:d.refDistance,rolloffFactor:void 0!==u.rolloffFactor?u.rolloffFactor:d.rolloffFactor,panningModel:void 0!==u.panningModel?u.panningModel:d.panningModel};var y=m._panner;y?(y.coneInnerAngle=d.coneInnerAngle,y.coneOuterAngle=d.coneOuterAngle,y.coneOuterGain=d.coneOuterGain,y.distanceModel=d.distanceModel,y.maxDistance=d.maxDistance,y.refDistance=d.refDistance,y.rolloffFactor=d.rolloffFactor,y.panningModel=d.panningModel):(m._pos||(m._pos=a._pos||[0,0,-.5]),D(m,"spatial"))}return a},Sound.prototype.init=function(a){return function(){var r=this,u=r._parent;r._orientation=u._orientation,r._stereo=u._stereo,r._pos=u._pos,r._pannerAttr=u._pannerAttr,a.call(this),r._stereo?u.stereo(r._stereo):r._pos&&u.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(a){return function(){var r=this,u=r._parent;return r._orientation=u._orientation,r._stereo=u._stereo,r._pos=u._pos,r._pannerAttr=u._pannerAttr,r._stereo?u.stereo(r._stereo):r._pos?u.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,u._refreshBuffer(r)),a.call(this)}}(Sound.prototype.reset);var D=function(a,r){"spatial"===(r=r||"spatial")?(a._panner=Howler.ctx.createPanner(),a._panner.coneInnerAngle=a._pannerAttr.coneInnerAngle,a._panner.coneOuterAngle=a._pannerAttr.coneOuterAngle,a._panner.coneOuterGain=a._pannerAttr.coneOuterGain,a._panner.distanceModel=a._pannerAttr.distanceModel,a._panner.maxDistance=a._pannerAttr.maxDistance,a._panner.refDistance=a._pannerAttr.refDistance,a._panner.rolloffFactor=a._pannerAttr.rolloffFactor,a._panner.panningModel=a._pannerAttr.panningModel,void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(a._pos[0],Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(a._pos[1],Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(a._pos[2],Howler.ctx.currentTime)):a._panner.setPosition(a._pos[0],a._pos[1],a._pos[2]),void 0!==a._panner.orientationX?(a._panner.orientationX.setValueAtTime(a._orientation[0],Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(a._orientation[1],Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(a._orientation[2],Howler.ctx.currentTime)):a._panner.setOrientation(a._orientation[0],a._orientation[1],a._orientation[2])):(a._panner=Howler.ctx.createStereoPanner(),a._panner.pan.setValueAtTime(a._stereo,Howler.ctx.currentTime)),a._panner.connect(a._node),a._paused||a._parent.pause(a._id,!0).play(a._id,!0)}}()}}]);